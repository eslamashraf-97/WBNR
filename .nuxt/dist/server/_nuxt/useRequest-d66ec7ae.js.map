{"version":3,"file":"useRequest-d66ec7ae.js","sources":["../../../../composables/useRequest.js"],"sourcesContent":["import { toast } from \"vue3-toastify\";\r\n\r\nexport default async function ({ url, requetOptions = {} }) {\r\n  const isServer = typeof window === \"undefined\";\r\n\r\n  const requestArgs = await useFetch(url, {\r\n    // request\r\n    onRequest({ request, options }) {\r\n      // get cookies\r\n      const cookies = useCookie(\"token\");\r\n\r\n      // headers\r\n      options.headers = options.headers || {};\r\n      options.headers[\"Authorization\"] = `Bearer ${cookies.value}`;\r\n      options.headers[\"Accept-Language\"] = \"ar\";\r\n      options.headers[\"Content-Language\"] = \"ar\";\r\n      options.headers[\"Accept\"] = \"application/json\";\r\n      options.headers[\"ContentType\"] = \"application/json\";\r\n    },\r\n\r\n    onRequestError({ request, options, error }) {\r\n      console.log(\"request error\", error);\r\n    },\r\n\r\n    onResponse({ request, response, options }) {\r\n      const responseData = response._data;\r\n\r\n      if (responseData && !isServer && options.method !== \"GET\") {\r\n        if (responseData?.message) {\r\n          toast.success(responseData?.message);\r\n        }\r\n      }\r\n    },\r\n\r\n    onResponseError({ response }) {\r\n      const responseData = response._data;\r\n\r\n      if (responseData && !isServer) {\r\n        if (responseData?.message) {\r\n          toast.error(responseData?.message);\r\n        }\r\n        if (error.response?.status === 401) {\r\n          // localStorage.removeItem(\"token\");\r\n          // window.location.pathname = \"/auth/login\";\r\n        }\r\n      }\r\n\r\n      // if (isServer && error.response) {\r\n      //   if (error.response?.status === 401) {\r\n      //     cookies.value = null;\r\n      //   }\r\n      // }\r\n    },\r\n\r\n    baseURL: \"http://85.31.238.244:3000/v1\",\r\n    method: \"get\",\r\n    ...requetOptions,\r\n  });\r\n  return { ...requestArgs };\r\n}\r\n"],"names":["error"],"mappings":";;;;;;;;;AAEe,eAAc,WAAE,EAAE,KAAK,gBAAgB,CAAA,KAAM;AAC1D,QAAM,WAAW;AAEjB,QAAM,cAAc,MAAM,SAAS,KAAK;AAAA;AAAA,IAEtC,UAAU,EAAE,SAAS,WAAW;AAE9B,YAAM,UAAU,UAAU,OAAO;AAGjC,cAAQ,UAAU,QAAQ,WAAW,CAAA;AACrC,cAAQ,QAAQ,eAAe,IAAI,UAAU,QAAQ,KAAK;AAC1D,cAAQ,QAAQ,iBAAiB,IAAI;AACrC,cAAQ,QAAQ,kBAAkB,IAAI;AACtC,cAAQ,QAAQ,QAAQ,IAAI;AAC5B,cAAQ,QAAQ,aAAa,IAAI;AAAA,IAClC;AAAA,IAED,eAAe,EAAE,SAAS,SAAS,OAAAA,OAAK,GAAI;AAC1C,cAAQ,IAAI,iBAAiBA,MAAK;AAAA,IACnC;AAAA,IAED,WAAW,EAAE,SAAS,UAAU,QAAO,GAAI;AACzC,YAAM,eAAe,SAAS;AAE9B,UAAI,gBAAgB,CAAC,YAAY,QAAQ,WAAW,OAAO;AACzD,YAAI,6CAAc,SAAS;AACzB,gBAAM,QAAQ,6CAAc,OAAO;AAAA,QACpC;AAAA,MACF;AAAA,IACF;AAAA,IAED,gBAAgB,EAAE,YAAY;;AAC5B,YAAM,eAAe,SAAS;AAE9B,UAAI,gBAAgB,CAAC,UAAU;AAC7B,YAAI,6CAAc,SAAS;AACzB,gBAAM,MAAM,6CAAc,OAAO;AAAA,QAClC;AACD,cAAI,WAAM,aAAN,mBAAgB,YAAW;AAAK;AAAA,MAIrC;AAAA,IAOF;AAAA,IAED,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,GAAG;AAAA,EACL,GAAA,aAAC;AACD,SAAO,EAAE,GAAG;AACd;"}