{"version":3,"file":"suggested-products-fe83baa3.js","sources":["../../../../pages/suggested-products.vue"],"sourcesContent":["<script setup>\r\nimport { apiGetSuggestedProductsUrl } from \"@/server\";\r\n\r\nimport { productsStatuses, productsActives } from \"@/constants\";\r\n\r\nconst { page, changePage } = usePagination();\r\n\r\nconst { selectedCountry } = useCountries();\r\n\r\nconst route = useRoute();\r\n\r\nconst orderBy = ref(route.query.orderBy);\r\n\r\nconst productPerformance = ref(route.query.performance);\r\n\r\nconst lowestPriceForSale = ref(route.query.lowest_price_for_sale);\r\n\r\nconst mostPriceForSale = ref(route.query.most_price_for_sale);\r\n\r\nconst lowestCommission = ref(route.query.lowest_commission);\r\n\r\nconst mostCommission = ref(route.query.most_commission);\r\n\r\nconst { data: productData, pending } = await useRequest({\r\n  url: () => apiGetSuggestedProductsUrl,\r\n  requetOptions: {\r\n    query: {\r\n      page: page,\r\n      country_id: selectedCountry.value.id,\r\n      orderBy: orderBy,\r\n      performance: productPerformance,\r\n      lowest_price_for_sale: lowestPriceForSale,\r\n      most_price_for_sale: mostPriceForSale,\r\n      lowest_commission: lowestCommission,\r\n      most_commission: mostCommission,\r\n    },\r\n    watch: [\r\n      page,\r\n      orderBy,\r\n      productPerformance,\r\n      lowestPriceForSale,\r\n      mostPriceForSale,\r\n      lowestCommission,\r\n      mostCommission,\r\n    ],\r\n  },\r\n});\r\n\r\nfunction getOrderByValue(value) {\r\n  if (orderBy.value) {\r\n    return productsStatuses.find((item) => item.value === value).title;\r\n  }\r\n  return productsStatuses[0].title;\r\n}\r\n\r\nfunction setOrderBy(data) {\r\n  orderBy.value = data.value;\r\n  navigateTo({\r\n    path: \"/suggested-products\",\r\n    query: {\r\n      ...route.query,\r\n      orderBy: data.value,\r\n    },\r\n  });\r\n}\r\n\r\nfunction getProductPerformanceValue(value) {\r\n  if (productPerformance.value) {\r\n    return productsActives.find((item) => item.value === value);\r\n  }\r\n  return productsActives[0];\r\n}\r\n\r\nfunction setProductPerformance(data) {\r\n  productPerformance.value = data.value;\r\n  navigateTo({\r\n    path: \"/suggested-products\",\r\n    query: {\r\n      ...route.query,\r\n      performance: data.value,\r\n    },\r\n  });\r\n}\r\n\r\nlet timeout;\r\n\r\nconst timer = 600;\r\n\r\nfunction handleLowestPriceForSaleInputValue(e) {\r\n  clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(() => {\r\n    lowestPriceForSale.value = e.target.value;\r\n    navigateTo({\r\n      path: \"/suggested-products\",\r\n      query: {\r\n        ...route.query,\r\n        lowest_price_for_sale: e.target.value,\r\n      },\r\n    });\r\n  }, timer);\r\n}\r\n\r\nfunction handleMostPriceForSaleInputValue(e) {\r\n  clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(() => {\r\n    mostPriceForSale.value = e.target.value;\r\n    navigateTo({\r\n      path: \"/suggested-products\",\r\n      query: {\r\n        ...route.query,\r\n        most_price_for_sale: e.target.value,\r\n      },\r\n    });\r\n  }, timer);\r\n}\r\n\r\nfunction handleLowestCommissionInputValue(e) {\r\n  clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(() => {\r\n    lowestCommission.value = e.target.value;\r\n    navigateTo({\r\n      path: \"/suggested-products\",\r\n      query: {\r\n        ...route.query,\r\n        lowest_commission: e.target.value,\r\n      },\r\n    });\r\n  }, timer);\r\n}\r\n\r\nfunction handleMostCommissionInputValue(e) {\r\n  clearTimeout(timeout);\r\n\r\n  timeout = setTimeout(() => {\r\n    mostCommission.value = e.target.value;\r\n    navigateTo({\r\n      path: \"/suggested-products\",\r\n      query: {\r\n        ...route.query,\r\n        most_commission: e.target.value,\r\n      },\r\n    });\r\n  }, timer);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"bg-primary\">\r\n    <p class=\"text-gray-400 text-2xl mb-9\">المنتجات / منتجات مرشحة لك</p>\r\n    <shared-title title=\"منتجات مرشحة لك\" />\r\n    <!-- filter box -->\r\n    <shared-cards-filter class=\"!items-start 2xl:items-center flex-wrap gap-9\">\r\n      <template v-slot:right>\r\n        <div class=\"flex flex-wrap items-center gap-9\">\r\n          <div class=\"flex flex-wrap items-center gap-4\">\r\n            <span class=\"text-gray-500 text-2xl\">اداء المنتج:</span>\r\n            <shared-menu\r\n              :items=\"productsActives\"\r\n              :button-props=\"{\r\n                class:\r\n                  'leading-normal px-8 py-[.38rem] min-w-0 text-xl border-0 bg-transparent hover:bg-transparent',\r\n              }\"\r\n              :menu-props=\"{\r\n                class: 'max-w-[9.25rem] px-8',\r\n              }\"\r\n            >\r\n              <template #label>\r\n                <div type=\"button\" class=\"flex items-center gap-[19px]\">\r\n                  <Icon name=\"iconamoon:arrow-down-2-duotone\" />\r\n                  <span\r\n                    v-if=\"getProductPerformanceValue(productPerformance).color\"\r\n                    class=\"w-[1.5rem] h-[.25rem] rounded-[3rem] block\"\r\n                    :style=\"{\r\n                      background:\r\n                        getProductPerformanceValue(productPerformance).color,\r\n                    }\"\r\n                  ></span>\r\n                  {{ getProductPerformanceValue(productPerformance).title }}\r\n                </div>\r\n              </template>\r\n              <template #item=\"{ data }\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"flex items-center gap-4 mb-[1.19rem] last:mb-0 text-gray-700 text-xl\"\r\n                  @click=\"setProductPerformance(data)\"\r\n                >\r\n                  <span\r\n                    v-if=\"data.color\"\r\n                    class=\"w-[1.5rem] h-[.25rem] rounded-[3rem] block\"\r\n                    :style=\"{ background: data.color }\"\r\n                  ></span>\r\n                  {{ data.title }}\r\n                </button>\r\n              </template>\r\n            </shared-menu>\r\n          </div>\r\n\r\n          <span class=\"hidden xl:block h-[36px] w-[1px] bg-gray-200\"></span>\r\n\r\n          <div class=\"flex flex-wrap items-center gap-9\">\r\n            <div class=\"flex flex-wrap items-center gap-4\">\r\n              <span class=\"text-gray-500 text-2xl\">اقل سعر للبيع:</span>\r\n              <div class=\"flex items-center gap-4\">\r\n                <shared-form-input\r\n                  class=\"bg-transparent !w-[4.5625rem] !h-[3.5625rem]\"\r\n                  type=\"text\"\r\n                  @input=\"handleLowestPriceForSaleInputValue\"\r\n                  :model-value=\"lowestPriceForSale\"\r\n                />\r\n                <span class=\"text-gray-200 text-2xl\">الى</span>\r\n                <shared-form-input\r\n                  class=\"bg-transparent !w-[4.5625rem] !h-[3.5625rem]\"\r\n                  type=\"text\"\r\n                  @input=\"handleMostPriceForSaleInputValue\"\r\n                  :model-value=\"mostPriceForSale\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <span class=\"hidden md:block h-[36px] w-[1px] bg-gray-200\"></span>\r\n\r\n            <div class=\"flex flex-wrap items-center gap-4\">\r\n              <span class=\"text-gray-500 text-2xl\">اقل ربح:</span>\r\n              <div class=\"flex items-center gap-4\">\r\n                <shared-form-input\r\n                  class=\"bg-transparent !w-[4.5625rem] !h-[3.5625rem]\"\r\n                  type=\"text\"\r\n                  @input=\"handleLowestCommissionInputValue\"\r\n                  :model-value=\"lowestCommission\"\r\n                />\r\n                <span class=\"text-gray-200 text-2xl\">الى</span>\r\n                <shared-form-input\r\n                  class=\"bg-transparent !w-[4.5625rem] !h-[3.5625rem]\"\r\n                  type=\"text\"\r\n                  @input=\"handleMostCommissionInputValue\"\r\n                  :model-value=\"mostCommission\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template v-slot:left>\r\n        <div class=\"flex flex-wrap items-center gap-4 whitespace-nowrap\">\r\n          <span class=\"text-gray-500 text-2xl\">ترتيب حسب:</span>\r\n          <shared-menu\r\n            :items=\"productsStatuses\"\r\n            :button-props=\"{\r\n              class: 'leading-normal px-8 py-[.38rem] min-w-0 text-xl',\r\n            }\"\r\n            :menu-props=\"{\r\n              class: 'max-w-[12.52rem] px-8',\r\n            }\"\r\n          >\r\n            <template #label>\r\n              <div type=\"button\" class=\"flex items-center gap-[19px]\">\r\n                <Icon name=\"iconamoon:arrow-down-2-duotone\" />\r\n                {{ getOrderByValue(orderBy) }}\r\n              </div>\r\n            </template>\r\n            <template #item=\"{ data }\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"flex mb-[1.19rem] last:mb-0 text-gray-700 text-xl\"\r\n                @click=\"setOrderBy(data)\"\r\n              >\r\n                {{ data.title }}\r\n              </button>\r\n            </template>\r\n          </shared-menu>\r\n        </div>\r\n      </template>\r\n    </shared-cards-filter>\r\n\r\n    <div\r\n      class=\"mt-24 grid md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-9 mb-40 grid-flow-row-dense\"\r\n      v-if=\"!pending && productData?.data.length\"\r\n    >\r\n      <lazy-shared-cards-product\r\n        v-for=\"(product, key) in productData?.data\"\r\n        :key=\"key\"\r\n        :details=\"product\"\r\n      />\r\n    </div>\r\n\r\n    <shared-no-results v-else-if=\"!pending && !productData?.data.length\" />\r\n\r\n    <div v-else class=\"w-full flex items-center justify-center my-10\">\r\n      <shared-loders-loading />\r\n    </div>\r\n\r\n    <shared-pagination\r\n      :meta=\"productData?.meta\"\r\n      :page=\"page\"\r\n      @changePage=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<style scoped></style>\r\n"],"names":["_withAsyncContext"],"mappings":"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"}