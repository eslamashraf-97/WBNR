{"version":3,"file":"login-24d2673b.js","sources":["../../../../pages/auth/login.vue"],"sourcesContent":["<script setup>\r\nimport { reactive, ref } from \"vue\";\r\n\r\nimport SocialMediaLogin from \"@/components/shared/SocialMediaLogin.vue\";\r\n\r\nimport { apiLoginUrl } from \"@/server\";\r\n\r\nconst { setUserData } = useAuth();\r\n\r\ndefinePageMeta({\r\n  layout: \"auth\",\r\n});\r\n\r\nconst isLoading = ref(false);\r\n\r\nconst form = reactive({\r\n  user: \"\",\r\n  password: \"\",\r\n});\r\n\r\nconst tokenCookies = useCookie(\"token\");\r\n\r\nasync function handleSubmit() {\r\n  isLoading.value = true;\r\n  await useRequest({\r\n    url: apiLoginUrl,\r\n    requetOptions: {\r\n      body: JSON.stringify(form),\r\n      method: \"post\",\r\n      onResponse: ({ response }) => {\r\n        const responseData = response._data;\r\n        setUserData(responseData.data.user, responseData.meta?.token);\r\n        navigateTo(\"/home\");\r\n      },\r\n    },\r\n  });\r\n  isLoading.value = false;\r\n}\r\n\r\nfunction loginWith(data) {\r\n  const responseData = data;\r\n  setUserData(responseData.data.customer, responseData.meta?.token);\r\n  navigateTo(\"/home\");\r\n}\r\n</script>\r\n\r\n<template>\r\n  <form @submit.prevent=\"handleSubmit\">\r\n    <social-media-login @loginWith=\"loginWith\" />\r\n    <div class=\"my-16\">\r\n      <div class=\"mb-7\">\r\n        <shared-form-input\r\n          class=\"w-full bg-transparent\"\r\n          placeholder=\"البريد الالكترونى\"\r\n          type=\"email\"\r\n          v-model=\"form.user\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <shared-form-input\r\n          class=\"w-full bg-transparent\"\r\n          placeholder=\"كلمة المرور\"\r\n          v-model=\"form.password\"\r\n          type=\"password\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"flex gap-4 items-center\">\r\n      <shared-buttons-primary-button\r\n        submit-title=\"استمرار\"\r\n        class=\"!bg-primary-200 text-white\"\r\n        type=\"submit\"\r\n        :loading=\"isLoading\"\r\n      />\r\n      <nuxt-link to=\"/auth/register\"\r\n        ><p class=\"text-primary-300 text-2xl\">ليس لدي حساب</p></nuxt-link\r\n      >\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<style scoped></style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,UAAM,EAAE,YAAW,IAAK;AAMxB,UAAM,YAAY,IAAI,KAAK;AAE3B,UAAM,OAAO,SAAS;AAAA,MACpB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AAEoB,cAAU,OAAO;AAmBtC,aAAS,UAAU,MAAM;;AACvB,YAAM,eAAe;AACrB,kBAAY,aAAa,KAAK,WAAU,kBAAa,SAAb,mBAAmB,KAAK;AAChE,iBAAW,OAAO;AAAA,IACpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}