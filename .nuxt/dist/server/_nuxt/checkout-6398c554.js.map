{"version":3,"file":"checkout-6398c554.js","sources":["../../../../pages/checkout.vue"],"sourcesContent":["<script setup>\r\nimport {\r\n  apiGetGov,\r\n  apiGetCartUrl,\r\n  apiPlaceOrderUrl,\r\n  apiAddDestinationUrl,\r\n} from \"@/server\";\r\n\r\nconst route = useRoute();\r\n\r\nconst { selectedCountry } = useCountries();\r\n\r\n// get cart\r\nconst { fire: fireCart } = useApi({\r\n  url: apiGetCartUrl,\r\n  requestOptions: {\r\n    query: {\r\n      country_id: selectedCountry.value?.id,\r\n    },\r\n  },\r\n});\r\n\r\nconst { data: cartData, pending } = await fireCart();\r\n\r\n// get gov\r\nconst { fire: fireGov } = useApi({\r\n  url: apiGetGov,\r\n  requestOptions: {\r\n    query: {\r\n      country_id: selectedCountry.value?.id,\r\n      take: 100,\r\n    },\r\n  },\r\n});\r\n\r\nconst { data: govData } = await fireGov();\r\n\r\nconst form = reactive({\r\n  name: \"\",\r\n  phone: \"\",\r\n  secondary_phone: \"\",\r\n  address_details: \"\",\r\n  store_name: \"\",\r\n  store_url: \"\",\r\n  governorate_id: \"\",\r\n});\r\n\r\nconst { fire: fireAddDestination } = useApi({\r\n  url: apiAddDestinationUrl,\r\n  requestOptions: {\r\n    method: \"post\",\r\n  },\r\n});\r\n\r\nfunction chooseGov(data) {\r\n  form.governorate_id = data.id;\r\n  fireAddDestination({\r\n    cart_id: cartData.value?.data.id,\r\n    governorate_id: data.id,\r\n  });\r\n}\r\n\r\nconst { fire: firePlaceOrder } = useApi({\r\n  url: apiPlaceOrderUrl + \"/\" + cartData.value?.data.id,\r\n  requestOptions: {\r\n    method: \"post\",\r\n  },\r\n});\r\n\r\nconst isLoadingPlaceOrder = ref(false);\r\nasync function placeOrder() {\r\n  isLoadingPlaceOrder.value = true;\r\n  await firePlaceOrder(form);\r\n  isLoadingPlaceOrder.value = false;\r\n}\r\n\r\nconst getSelectedGov = computed(() =>\r\n  govData.value?.data.find((item) => item.id === form.governorate_id),\r\n);\r\n</script>\r\n<template>\r\n  <section class=\"bg-primary\">\r\n    <shared-title title=\"مراجعة الطلب\" />\r\n    <div class=\"flex flex-col-reverse xl:flex-row justify-start gap-24\">\r\n      <checkout-aside\r\n        :details=\"cartData.data\"\r\n        @placeOrder=\"placeOrder\"\r\n        :isLoadingPlaceOrder=\"isLoadingPlaceOrder\"\r\n      />\r\n\r\n      <div class=\"flex-1\">\r\n        <h5 class=\"text-2xl text-gray-700 mb-16\">بيانات شخصية</h5>\r\n        <form class=\"w-full xl:w-[38rem]\">\r\n          <div class=\"mb-7\">\r\n            <shared-form-input\r\n              placeholder=\"الأسم بالكامل\"\r\n              class=\"bg-transparent !w-full\"\r\n              type=\"text\"\r\n              v-model=\"form.name\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"mb-7\">\r\n            <shared-form-input\r\n              placeholder=\"رقم الهاتف\"\r\n              class=\"bg-transparent !w-full\"\r\n              type=\"text\"\r\n              v-model=\"form.phone\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"mb-24\">\r\n            <shared-form-input\r\n              placeholder=\"رقم الهاتف البديل (إختياري)\"\r\n              class=\"bg-transparent !w-full\"\r\n              type=\"text\"\r\n              v-model=\"form.secondary_phone\"\r\n            />\r\n          </div>\r\n\r\n          <h5 class=\"text-2xl text-gray-700 mb-16\">بيانات الشحن</h5>\r\n\r\n          <div class=\"mb-16\">\r\n            <label for=\"address\" class=\"text-2xl text-gray-500 mb-6 block\"\r\n              >العنوان بالتفصيل</label\r\n            >\r\n            <div class=\"relative\">\r\n              <shared-form-input\r\n                placeholder=\" المنطقة, الشارع, العقار, الشقة\"\r\n                class=\"ps-[11.8rem] bg-transparent !w-full\"\r\n                id=\"address\"\r\n                type=\"text\"\r\n                v-model=\"form.address_details\"\r\n              />\r\n\r\n              <div class=\"absolute top-1/2 -translate-y-1/2 start-[5px]\">\r\n                <shared-menu\r\n                  :items=\"govData.data\"\r\n                  :buttonProps=\"{\r\n                    class:\r\n                      'w-[11.1375rem] h-[3.06rem] !p-0 flex items-center justify-center rounded-[0.75rem] !border-gray-200 !bg-gray-100',\r\n                  }\"\r\n                  :menuProps=\"{\r\n                    class: 'w-[11.1375rem]',\r\n                  }\"\r\n                >\r\n                  <template #label>\r\n                    <div class=\"flex items-center gap-[19px]\">\r\n                      <Icon name=\"iconamoon:arrow-down-2-duotone\" />\r\n                      {{ getSelectedGov?.name || \"المحافظة\" }}\r\n                    </div>\r\n                  </template>\r\n                  <template #item=\"{ data }\">\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"flex w-full gap-[24px] items-center mb-[19px] last:mb-0 h-[35px]\"\r\n                      @click=\"chooseGov(data)\"\r\n                    >\r\n                      <span>{{ data.name }}</span>\r\n                    </button>\r\n                  </template>\r\n                </shared-menu>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"flex items-center gap-6\">\r\n            <div class=\"w-[10.75rem]\">\r\n              <label for=\"address\" class=\"text-2xl text-gray-500 mb-6 block\"\r\n                >اسم متجرك</label\r\n              >\r\n              <shared-form-input\r\n                type=\"text\"\r\n                placeholder=\"myrgroup\"\r\n                class=\"bg-transparent w-full\"\r\n                v-model=\"form.store_name\"\r\n              />\r\n            </div>\r\n            <div class=\"flex-1\">\r\n              <label for=\"address\" class=\"text-2xl text-gray-500 mb-6 block\"\r\n                >لينك المتجر ( صفحة الفيسبوك )</label\r\n              >\r\n              <shared-form-input\r\n                type=\"url\"\r\n                placeholder=\"myrgroup.co\"\r\n                class=\"bg-transparent !w-full\"\r\n                v-model=\"form.store_url\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<style scoped></style>\r\n"],"names":["_withAsyncContext","_a"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQc,aAAW;AAEzB,UAAM,EAAE,gBAAe,IAAK;AAG5B,UAAM,EAAE,MAAM,SAAU,IAAG,OAAO;AAAA,MAChC,KAAK;AAAA,MACL,gBAAgB;AAAA,QACd,OAAO;AAAA,UACL,aAAY,qBAAgB,UAAhB,mBAAuB;AAAA,QACpC;AAAA,MACF;AAAA,IACH,CAAC;AAED,UAAM,EAAE,MAAM,UAAU,QAAS,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAQ,CAAC;AAGnD,UAAM,EAAE,MAAM,QAAS,IAAG,OAAO;AAAA,MAC/B,KAAK;AAAA,MACL,gBAAgB;AAAA,QACd,OAAO;AAAA,UACL,aAAY,qBAAgB,UAAhB,mBAAuB;AAAA,UACnC,MAAM;AAAA,QACP;AAAA,MACF;AAAA,IACH,CAAC;AAED,UAAM,EAAE,MAAM,QAAS,KAAG,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,QAAO,CAAC;AAExC,UAAM,OAAO,SAAS;AAAA,MACpB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,iBAAiB;AAAA,MACjB,iBAAiB;AAAA,MACjB,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,gBAAgB;AAAA,IAClB,CAAC;AAED,UAAM,EAAE,MAAM,mBAAoB,IAAG,OAAO;AAAA,MAC1C,KAAK;AAAA,MACL,gBAAgB;AAAA,QACd,QAAQ;AAAA,MACT;AAAA,IACH,CAAC;AAED,aAAS,UAAU,MAAM;;AACvB,WAAK,iBAAiB,KAAK;AAC3B,yBAAmB;AAAA,QACjB,UAASC,MAAA,SAAS,UAAT,gBAAAA,IAAgB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,MACzB,CAAG;AAAA,IACH;AAEA,UAAM,EAAE,MAAM,eAAgB,IAAG,OAAO;AAAA,MACtC,KAAK,mBAAmB,QAAM,cAAS,UAAT,mBAAgB,KAAK;AAAA,MACnD,gBAAgB;AAAA,QACd,QAAQ;AAAA,MACT;AAAA,IACH,CAAC;AAED,UAAM,sBAAsB,IAAI,KAAK;AACrC,mBAAe,aAAa;AAC1B,0BAAoB,QAAQ;AAC5B,YAAM,eAAe,IAAI;AACzB,0BAAoB,QAAQ;AAAA,IAC9B;AAEA,UAAM,iBAAiB;AAAA,MAAS,MAAA;;AAC9B,gBAAAA,MAAA,QAAQ,UAAR,gBAAAA,IAAe,KAAK,KAAK,CAAC,SAAS,KAAK,OAAO,KAAK;AAAA;AAAA,IACtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}