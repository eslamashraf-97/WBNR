{"version":3,"file":"_id_-57294513.js","sources":["../../../../assets/images/cart-icon.svg","../../../../pages/product/[id].vue"],"sourcesContent":["export default \"__VITE_ASSET__c8904f4d__\"","<script setup>\r\nimport {\r\n  apiGetSingleProductUrl,\r\n  apiAddToCartUrl,\r\n  apiGetProductsUrl,\r\n} from \"@/server\";\r\n\r\nconst { setCartLength, cartLength } = useCartLength();\r\n\r\nconst route = useRoute();\r\n\r\nconst { fire } = useApi({\r\n  url: apiGetSingleProductUrl + \"/\" + route.params.id,\r\n});\r\n\r\nconst { data: productData } = await fire();\r\n\r\nconst { fire: fireGetByCategory } = useApi({\r\n  url: apiGetProductsUrl,\r\n  requestOptions: {\r\n    query: { category_id: productData.value?.data.category_id },\r\n  },\r\n});\r\n\r\nconst { data: productDataByCategory } = await fireGetByCategory();\r\n\r\nconst productForm = reactive({\r\n  quantity: 1,\r\n  price: productData.value?.data.price,\r\n});\r\n\r\nconst isLoading = ref(false);\r\n\r\nconst addedToCartStatus = ref(false);\r\n\r\nasync function addToCart() {\r\n  isLoading.value = true;\r\n  const payload = {\r\n    product_id: productData.value?.data.id,\r\n    quantity: productForm.quantity, // must be 1 or more no 0,\r\n    final_price: productData.value?.data.price,\r\n  };\r\n  await useRequest({\r\n    url: apiAddToCartUrl,\r\n    requetOptions: {\r\n      body: JSON.stringify(payload),\r\n      method: \"post\",\r\n      onResponse: (response) => {\r\n        addedToCartStatus.value = true;\r\n        setCartLength(cartLength.value + productForm.quantity);\r\n      },\r\n    },\r\n  });\r\n  isLoading.value = false;\r\n}\r\n\r\nconst commission = computed(\r\n  () =>\r\n    (productForm.price -\r\n      productData.value.data.price +\r\n      productData.value.data.minCommission) *\r\n    productForm.quantity,\r\n);\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"flex items-center text-gray-400 text-2xl mb-9\">\r\n      <nuxt-link to=\"/suggested-products\">المنتجات</nuxt-link>\r\n      <span>&nbsp;/&nbsp;</span>\r\n      <span>{{ productData?.data?.category?.name }}</span>\r\n      <span>&nbsp;/&nbsp;</span>\r\n      <span>{{ productData?.data?.title }}</span>\r\n    </div>\r\n    <template v-if=\"productData?.data\">\r\n      <div class=\"flex gap-16 mb-24\">\r\n        <!-- Gallery -->\r\n        <div class=\"bg-white p-9 rounded-lg\">\r\n          <div class=\"gallery flex gap-2\">\r\n            <img\r\n              :src=\"productData.data.featured_image\"\r\n              class=\"w-[36rem] h-[36rem] object-cover\"\r\n            />\r\n            <div\r\n              class=\"flex flex-col justify-between rounded-lg overflow-hidden\"\r\n            >\r\n              <img\r\n                v-for=\"(productImage, index) in productData.data.images\"\r\n                :alt=\"productImage.alt_image\"\r\n                :src=\"productImage.url\"\r\n                class=\"w-32 h-32 object-cover cursor-pointer\"\r\n                @click=\"productData.data.featured_image = productImage.url\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <p class=\"text-primary-300 text-xl font-semibold mt-7\">\r\n            تحميل كل صور المنتج\r\n            <span>\r\n              <Icon name=\"pepicons-pop:angle-left\" />\r\n            </span>\r\n          </p>\r\n        </div>\r\n\r\n        <!-- details -->\r\n        <div class=\"details flex-1\">\r\n          <!-- main info -->\r\n          <div class=\"main-info\">\r\n            <p class=\"text-gray-700 text-2xl font-normal\">اداء المنتج:</p>\r\n            <h1 class=\"text-gray-800 text-5xl my-4\">\r\n              {{ productData.data.title }}\r\n            </h1>\r\n            <p class=\"text-gray-400 text-2xl flex gap-3 items-center\">\r\n              <span>كود المنتج:</span>\r\n              <span>{{ productData.data.code }}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class=\"flex items-center gap-16 mt-10\">\r\n            <div>\r\n              <span class=\"text-base text-gray-400 font-light\">سعر المنتج</span>\r\n              <h6\r\n                class=\"mb-0 text-3xl text-gray-800 flex gap-[10px] items-center leading-[48px]\"\r\n              >\r\n                {{ productData.data.price }} <span>ج.م</span>\r\n              </h6>\r\n            </div>\r\n\r\n            <div class=\"h-[36px] bg-gray-200 w-[1px]\"></div>\r\n\r\n            <div>\r\n              <span class=\"text-base text-gray-400 font-light\"\r\n                >الربح من اجمالي السعر</span\r\n              >\r\n              <h6\r\n                class=\"mb-0 text-3xl text-gray-800 flex gap-[10px] items-center leading-[48px]\"\r\n              >\r\n                {{ productData.data.minCommission }} <span>ج.م</span>\r\n              </h6>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"mt-10 mb-10\">\r\n            <span class=\"text-base text-gray-400 font-light\"\r\n              >الكمية المتوفرة</span\r\n            >\r\n            <h6\r\n              class=\"mb-0 text-3xl text-gray-800 flex gap-[10px] items-center leading-[48px]\"\r\n            >\r\n              {{ productData.data.stock }} <span>قطعة</span>\r\n            </h6>\r\n          </div>\r\n\r\n          <div\r\n            class=\"px-9 py-5 shadow-main rounded-sm border border-gray-200 max-w-[650px]\"\r\n          >\r\n            <div class=\"flex items-center gap-6\">\r\n              <div>\r\n                <span class=\"text-base text-gray-400 font-light mb-5 block\"\r\n                  >الكمية</span\r\n                >\r\n                <div class=\"relative w-[96px]\">\r\n                  <shared-form-input\r\n                    type=\"text\"\r\n                    class=\"w-[96px] h-[53px] bg-transparent text-xl\"\r\n                    v-model.number=\"productForm.quantity\"\r\n                  />\r\n                  <div\r\n                    class=\"absolute top-[1px] left-[1px] bottom-[1px] flex flex-col items-center bg-white rounded-[11px]\"\r\n                  >\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"w-[24px] flex-1 border-b border-b-gray-200 border-s border-s-gray-200\"\r\n                      @click=\"productForm.quantity++\"\r\n                    >\r\n                      +\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"w-[24px] flex-1 border-s border-s-gray-200\"\r\n                      @click=\"\r\n                        productForm.quantity > 1 ? productForm.quantity-- : null\r\n                      \"\r\n                    >\r\n                      -\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span class=\"text-base text-gray-400 font-light mb-5 block\"\r\n                  >سعر البيع للقطعة</span\r\n                >\r\n                <div class=\"relative w-[172px]\">\r\n                  <shared-form-input\r\n                    type=\"text\"\r\n                    class=\"!w-[172px] h-[53px] bg-transparent text-xl\"\r\n                    v-model=\"productForm.price\"\r\n                  />\r\n                  <div\r\n                    class=\"absolute top-[1px] left-[1px] bottom-[1px] flex flex-col bg-white rounded-[11px]\"\r\n                  >\r\n                    <div\r\n                      class=\"w-[57px] flex-1 border-s border-s-gray-200 flex items-center justify-center text-xl text-gray-300 font-bold\"\r\n                    >\r\n                      ج.م\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span\r\n                class=\"text-base text-gray-400 flex gap-[12px] mt-auto mb-3\"\r\n              >\r\n                <span>الربح من اجمالي السعر</span>\r\n                <span\r\n                  class=\"flex items-center gap-[10px] text-primary-300 text-xl\"\r\n                  >{{ commission }}\r\n                  <span>ج.م</span>\r\n                </span>\r\n              </span>\r\n            </div>\r\n\r\n            <div class=\"mt-12 flex items-center gap-7\">\r\n              <shared-buttons-primary-button\r\n                submit-title=\"اطلب الان\"\r\n                class=\"w-[232px] h-[67px]\"\r\n                @click=\"\r\n                  navigateTo(\r\n                    `/checkout-quick-order?product=${productData.data.id}&title=${productData.data.title}&price=${productData.data.price}&minCommission=${productData.data.minCommission}&commission=${commission}&qty=${productForm.quantity}&image=${productData.data.featured_image}`,\r\n                  )\r\n                \"\r\n              />\r\n              <shared-buttons-secondary-button\r\n                class=\"w-[93px] h-[67px] flex items-center justify-center\"\r\n                @click=\"addToCart\"\r\n                :loading=\"isLoading\"\r\n                v-if=\"!addedToCartStatus\"\r\n              >\r\n                <img src=\"@/assets/images/cart-icon.svg\" />\r\n              </shared-buttons-secondary-button>\r\n              <shared-buttons-secondary-button\r\n                class=\"w-[232px h-[67px] flex items-center justify-center\"\r\n                @click=\"navigateTo('/cart')\"\r\n                v-else\r\n              >\r\n                اذهب الى العربة\r\n                <Icon name=\"iconamoon:arrow-left-2-duotone\" class=\"text-2xl\" />\r\n              </shared-buttons-secondary-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- description -->\r\n      <div class=\"mb-24\">\r\n        <p class=\"text-gray-700 text-3xl font-normal mb-8\">وصف المنتج</p>\r\n        <div\r\n          class=\"bg-white rounded-lg border p-9\"\r\n          v-html=\"productData.data.description\"\r\n        ></div>\r\n      </div>\r\n\r\n      <shared-title\r\n        :title=\"productData.data.category?.name\"\r\n        url=\"/suggested-products\"\r\n      />\r\n\r\n      <shared-product-swiper>\r\n        <swiper-slide\r\n          v-for=\"(product, key) in productDataByCategory.data\"\r\n          :key=\"key\"\r\n        >\r\n          <lazy-shared-cards-product :details=\"product\" />\r\n        </swiper-slide>\r\n      </shared-product-swiper>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<style scoped></style>\r\n"],"names":["_withAsyncContext","_a","_b"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,iBAAA,wBAAA;;;;;;;;ACOf,UAAM,EAAE,eAAe,eAAe;AAEtC,UAAM,QAAQ,SAAQ;AAEtB,UAAM,EAAE,KAAM,IAAG,OAAO;AAAA,MACtB,KAAK,yBAAyB,MAAM,MAAM,OAAO;AAAA,IACnD,CAAC;AAED,UAAM,EAAE,MAAM,YAAa,KAAG,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,KAAI,CAAC;AAEzC,UAAM,EAAE,MAAM,kBAAmB,IAAG,OAAO;AAAA,MACzC,KAAK;AAAA,MACL,gBAAgB;AAAA,QACd,OAAO,EAAE,cAAa,iBAAY,UAAZ,mBAAmB,KAAK,YAAa;AAAA,MAC5D;AAAA,IACH,CAAC;AAED,UAAM,EAAE,MAAM,sBAAuB,KAAG,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,kBAAiB,CAAC;AAEhE,UAAM,cAAc,SAAS;AAAA,MAC3B,UAAU;AAAA,MACV,QAAO,iBAAY,UAAZ,mBAAmB,KAAK;AAAA,IACjC,CAAC;AAED,UAAM,YAAY,IAAI,KAAK;AAE3B,UAAM,oBAAoB,IAAI,KAAK;AAEnC,mBAAe,YAAY;;AACzB,gBAAU,QAAQ;AAClB,YAAM,UAAU;AAAA,QACd,aAAYC,MAAA,YAAY,UAAZ,gBAAAA,IAAmB,KAAK;AAAA,QACpC,UAAU,YAAY;AAAA;AAAA,QACtB,cAAaC,MAAA,YAAY,UAAZ,gBAAAA,IAAmB,KAAK;AAAA,MACzC;AACE,YAAM,WAAW;AAAA,QACf,KAAK;AAAA,QACL,eAAe;AAAA,UACb,MAAM,KAAK,UAAU,OAAO;AAAA,UAC5B,QAAQ;AAAA,UACR,YAAY,CAAC,aAAa;AACxB,8BAAkB,QAAQ;AAC1B,0BAAc,WAAW,QAAQ,YAAY,QAAQ;AAAA,UACtD;AAAA,QACF;AAAA,MACL,CAAG;AACD,gBAAU,QAAQ;AAAA,IACpB;AAEA,UAAM,aAAa;AAAA,MACjB,OACG,YAAY,QACX,YAAY,MAAM,KAAK,QACvB,YAAY,MAAM,KAAK,iBACzB,YAAY;AAAA,IAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}