import{_ as B}from"./Title.9bdd06cd.js";import{_ as L}from"./LoaderButton.181013ce.js";import T from"./Icon.fe93bad7.js";import{_ as j}from"./Input.ee62193e.js";import{_ as q}from"./SecondaryButton.68fdc712.js";import{u as f}from"./useApi.a33fd01d.js";import{u as D}from"./useAuth.b517ff58.js";import{a1 as $,a as d,r as R,E as p,O as w,m as s,P as e,u as t,Q as E,G,Z as P}from"./swiper-vue.cec2437d.js";import{_ as z}from"./upload-icon.9f672ede.js";import"./entry.6d26f239.js";import{z as M,o as Q,A as Z,B as H}from"./index.91beaf37.js";import"./nuxt-link.9b0c7cb7.js";import"./state.b5e2d2f6.js";const J=""+new URL("clipboard.e656b8c5.svg",import.meta.url).href,K=""+new URL("user-image.0b3a482c.svg",import.meta.url).href;const W={class:"bg-primary"},X={class:"flex gap-24"},Y={class:"w-[22.5rem] flex flex-col gap-9"},ee={class:"w-full h-[22.5rem] border border-gray-200 bg-gray-100 rounded-3xl flex justify-center items-end"},te=["src","alt"],oe={class:"cursor-pointer flex items-center justify-center gap-[1.19rem] leading-normal text-gray-700 text-2xl w-full h-[3.5625rem] border border-gray-200 bg-white rounded-[.75rem]",for:"upload-avatar"},ae={key:0,class:"loading-container"},se={key:1,src:z,alt:"upload avatar",class:""},le=e("span",null,"تحميل صورة جديدة",-1),ne={class:"flex items-center gap-4 text-2xl text-gray-500 leading-normal"},re=e("span",null,"كود التاجر:",-1),ie={class:"flex-1 max-w-[38rem]"},de=["onSubmit"],me=e("h5",{class:"text-2xl text-gray-700 mb-16"},"المعلومات الشخصية",-1),ce={class:"mb-6"},pe=e("label",{for:"firstName",class:"text-2xl text-gray-500 mb-6 block"},"الاسم:",-1),ue={class:"flex-1 mb-6"},_e=e("label",{for:"phoneNumber",class:"text-2xl text-gray-500 mb-6 block"},"رقم الهاتف:",-1),fe={class:"flex-1 mb-24"},we=e("label",{for:"email",class:"text-2xl text-gray-500 mb-6 block"},"البريد الإلكتروني:",-1),ge=["onSubmit"],be=e("h5",{class:"text-2xl text-gray-700 mb-16"},"تغيير كلمة المرور",-1),xe={class:"flex-1 mb-16"},he={class:"flex-1 mb-6"},ve={class:"flex-1 mb-24"},Te={__name:"profile",async setup(ye){let u,y;const{fire:N}=f({url:M}),{pending:Ue,data:l}=([u,y]=$(()=>N()),u=await u,y(),u);console.log(l.value),D();const g=d(!1),U=d();function S(){var m=document.createRange();m.selectNode(U.value),window.getSelection().removeAllRanges(),window.getSelection().addRange(m),document.execCommand("copy"),window.getSelection().removeAllRanges(),g.value=!0;const o=setTimeout(()=>{g.value=!1,clearTimeout(o)},600)}const b=d(!1),V=d(null),n=R({avatar:l.value.data.avatar,name:l.value.data.name,phone:l.value.data.phone,email:l.value.data.email});async function A(m){const o=m.target.files;if(o.length){b.value=!0;const c=new FormData;c.append("image",o[0]);const{fire:v}=f({url:Q,requestOptions:{method:"post",body:c,onResponse:_=>{_.response.ok&&(n.avatar=_.response._data.url,V.value=window.URL.createObjectURL(o[0]))}}});await v(c),b.value=!1}}const r=R({old_password:"",new_password:"",confirm_new_password:""}),{fire:C}=f({url:Z,requestOptions:{method:"post"}}),x=d(!1);async function F(){x.value=!0,await C(n),x.value=!1}const{fire:I}=f({url:H,requestOptions:{method:"patch"}}),h=d(!1);async function O(){h.value=!0,await I(r),h.value=!1}return(m,o)=>{const c=B,v=L,_=T,i=j,k=q;return p(),w("div",W,[s(c,{title:"اعدادات الحساب"}),e("div",X,[e("div",Y,[e("div",ee,[e("img",{src:t(V)||t(l).data.avatar||t(K),alt:t(l).data.name,class:""},null,8,te)]),e("input",{type:"file",id:"upload-avatar",class:"hidden",onChange:A},null,32),e("label",oe,[t(b)?(p(),w("div",ae,[s(v)])):(p(),w("img",se)),le]),e("div",ne,[re,e("span",{ref_key:"copyRef",ref:U},E(t(l).data.id),513),t(g)?(p(),G(_,{key:1,name:"la:check-circle",class:"text-primary-300"})):(p(),w("img",{key:0,onClick:S,src:J,alt:"clipboard",class:"cursor-pointer"}))])]),e("div",ie,[e("form",{class:"mb-24",onSubmit:P(F,["prevent"])},[me,e("div",ce,[pe,s(i,{placeholder:"الاسم الأول",class:"bg-transparent !w-full",id:"firstName",type:"text",modelValue:t(n).name,"onUpdate:modelValue":o[0]||(o[0]=a=>t(n).name=a)},null,8,["modelValue"])]),e("div",ue,[_e,s(i,{placeholder:"رقم الهاتف",class:"bg-transparent !w-full",id:"phoneNumber",type:"text",modelValue:t(n).phone,"onUpdate:modelValue":o[1]||(o[1]=a=>t(n).phone=a)},null,8,["modelValue"])]),e("div",fe,[we,s(i,{placeholder:"البريد الإلكتروني",class:"bg-transparent !w-full",id:"email",type:"email",modelValue:t(n).email,"onUpdate:modelValue":o[2]||(o[2]=a=>t(n).email=a)},null,8,["modelValue"])]),s(k,{"submit-title":"حفظ التغييرات",type:"submit",class:"!text-[1.875rem] !px-[3.5rem] w-auto h-auto py-[1.25rem]",loading:t(x)},null,8,["loading"])],40,de),e("form",{onSubmit:P(O,["prevent"])},[be,e("div",xe,[s(i,{placeholder:"كلمة المرور الحالية",class:"bg-transparent !w-full",id:"currentPassword",type:"password",modelValue:t(r).old_password,"onUpdate:modelValue":o[3]||(o[3]=a=>t(r).old_password=a)},null,8,["modelValue"])]),e("div",he,[s(i,{placeholder:"كلمة المرور الجديدة",class:"bg-transparent !w-full",id:"newPassword",type:"password",modelValue:t(r).new_password,"onUpdate:modelValue":o[4]||(o[4]=a=>t(r).new_password=a)},null,8,["modelValue"])]),e("div",ve,[s(i,{placeholder:"تأكيد كلمة المرور الجديدة",class:"bg-transparent !w-full",id:"confirmNewPassword",type:"password",modelValue:t(r).confirm_new_password,"onUpdate:modelValue":o[5]||(o[5]=a=>t(r).confirm_new_password=a)},null,8,["modelValue"])]),s(k,{"submit-title":"حفظ التغييرات",type:"submit",class:"!text-[1.875rem] !px-[3.5rem] w-auto h-auto py-[1.25rem]",loading:t(h)},null,8,["loading"])],40,ge)])])])}}};export{Te as default};
