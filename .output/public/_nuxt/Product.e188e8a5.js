import T from"./Icon.fe93bad7.js";import{_ as L}from"./nuxt-link.9b0c7cb7.js";import{u as E}from"./useSavedProducts.a3ecb773.js";import{u as j}from"./useCartLength.2c8490eb.js";import{u as m}from"./useApi.a33fd01d.js";import{H as q,I as B,h as I}from"./index.91beaf37.js";import{c as F}from"./index.e297d5fd.js";import{a as f,f as N,E as n,O as U,P as e,u as c,G as l,m as p,ad as V,Q as v,H as A,a0 as D}from"./swiper-vue.cec2437d.js";import"./entry.6d26f239.js";import"./state.b5e2d2f6.js";const H={key:0,class:"min-w-96 border border-gray-200 shadow-product rounded-md overflow-hidden"},z=["src"],G={class:"py-9 px-7 relative"},Q={class:"w-36 bg-white py-3 flex justify-center text-primary-300 text-2xl rounded-xs absolute gap-2 top-[-25px] left-5"},R={class:"text-[28px] leading-10"},$={class:"flex justify-between my-9"},J=e("h5",{class:"text-gray-400 text-base font-normal mb-1"}," اقل سعر للبيع ",-1),K={class:"text-2xl"},M=e("h5",{class:"text-gray-400 text-base font-normal mb-1"}," اقل سعر للربح ",-1),W={class:"text-2xl"},X=e("span",null,"تفاصيل المنتج",-1),le={__name:"Product",props:{details:{type:Object}},setup(s){const o=s,{setSavedProductsCount:_,savedProductsCount:h}=E(),{cartLength:x,setCartLength:g}=j(),r=f(!1),i=f(o.details.is_favorite),{fire:y}=m({url:()=>q+"/"+o.details.id,requestOptions:{method:"POST"}});async function P(){r.value=!0;const{status:t}=await y();console.log(t),t.value==="success"&&(i.value=!0,_(h.value+1)),r.value=!1}const{fire:k}=m({url:()=>B+"/"+o.details.id,requestOptions:{method:"DELETE"}});async function b(){r.value=!0;const{status:t}=await k();console.log(t.value),t.value==="success"&&(i.value=!1,_(h.value-1)),r.value=!1}const u=f(!1),{fire:C}=m({url:()=>I,requestOptions:{method:"POST"}});async function w(){u.value=!0;const{status:t}=await C({product_id:o.details.id,quantity:1,final_price:o.details.price});t.value==="success"&&g(x+1),u.value=!1}const S=N(()=>{const t=(o.details.orderConfirmedPercentage+o.details.orderCompletedPercentage)/2;return F.find(d=>d.from<=t&&(d.to>=t||d.to==null)).color});return(t,d)=>{const a=T,O=L;return s.details?(n(),U("div",H,[e("img",{src:s.details.featured_image,class:"object-cover w-full h-80"},null,8,z),e("div",G,[e("div",Q,[!c(i)&&!c(r)?(n(),l(a,{key:0,name:"fluent:bookmark-20-regular",class:"cursor-pointer",onClick:P})):c(i)&&!c(r)?(n(),l(a,{key:1,name:"fluent:bookmark-20-filled",class:"cursor-pointer",onClick:b})):(n(),l(a,{key:2,name:"icomoon-free:spinner2",class:"loading-spinner"})),p(a,{name:"ci:line-l",class:"text-gray-200"}),c(u)?(n(),l(a,{key:4,name:"icomoon-free:spinner2",class:"loading-spinner"})):(n(),l(a,{key:3,name:"la:cart-arrow-down",class:"cursor-pointer",onClick:w}))]),e("span",{class:"w-[1.5rem] h-[.25rem] rounded-[3rem] block mb-2",style:V({background:c(S)})},null,4),e("h1",R,v(s.details.title),1),e("div",$,[e("div",null,[J,e("h3",K,v(s.details.price),1)]),e("div",null,[M,e("h3",W,v(s.details.minCommission),1)])]),p(O,{to:`/product/${s.details.id}`,class:"text-primary-300 flex gap-1 font-semibold items-center text-lg"},{default:A(()=>[X,p(a,{name:"iconamoon:arrow-left-2-duotone",class:"text-2xl"})]),_:1},8,["to"])])])):D("",!0)}}};export{le as default};
